# `展开环境变量`

## `vim.fn.expand()`

```lua
local myvimrc = vim.fn.expand("$MYVIMRC")
print(myvimrc)  -- 输出: ~/.config/nvim/init.lua
```

```lua
local home = vim.fn.expand("$HOME")
local path = vim.fn.expand("$PATH")
local user = vim.fn.expand("$USER")
```

```lua
local myvimrc = vim.fn.getenv("MYVIMRC")
local home = vim.fn.getenv("HOME")
local path = vim.fn.getenv("PATH")
```

```lua
local myvimrc = vim.env.MYVIMRC
local home = vim.env.HOME
local path = vim.env.PATH
```

```lua
-- 根据环境变量设置配置
local home = vim.fn.expand("$HOME")
local config_dir = home .. "/.config/nvim"

-- 设置路径
vim.opt.runtimepath:prepend(config_dir .. "/lua")
```

```lua
-- 设置环境变量
vim.fn.setenv("MY_CUSTOM_VAR", "/path/to/something")

-- 获取自定义环境变量
local custom_var = vim.fn.expand("$MY_CUSTOM_VAR")
```

```lua
-- 检查环境变量是否存在
local function get_env_or_default(var_name, default)
  local value = vim.fn.expand("$" .. var_name)
  return value ~= "$" .. var_name and value or default
end

-- 使用
local myvimrc = get_env_or_default("MYVIMRC", "~/.config/nvim/init.lua")
local custom_path = get_env_or_default("CUSTOM_PATH", "/default/path")
```

## `echo`

```
:echo $MYVIMRC
:echo $HOME
:edit $MYVIMRC
```

```lua
-- 编辑配置文件
vim.cmd("edit " .. vim.fn.expand("$MYVIMRC"))

-- 切换到主目录
vim.fn.chdir(vim.fn.expand("$HOME"))
```

```lua
-- 获取配置文件路径
local function get_config_path()
  local myvimrc = vim.fn.expand("$MYVIMRC")
  local config_dir = vim.fn.fnamemodify(myvimrc, ":h")
  return config_dir
end

-- 获取插件目录
local function get_plugin_dir()
  local home = vim.fn.expand("$HOME")
  return home .. "/.local/share/nvim/site/pack/packer/start"
end

-- 使用
local config_dir = get_config_path()
local plugin_dir = get_plugin_dir()
```
