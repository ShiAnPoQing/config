# `切换工作目录`

## `cd` 命令

```
:cd /path/to/directory
```

切换到当前文件的上一级目录

```
:cd %:h
```

## `lcd` 命令

只对当前窗口有效

```
:lcd /path/to/directory
```

切换到当前文件的上一级目录

```
:lcd %:h
```

## `tcd` 命令

只对当前标签页有效

```
:tcd /path/to/directory
```

## Lua

```lua
vim.fn.chdir("/path/to/directory")
```

```lua
vim.api.nvim_set_current_dir("/path/to/directory")
```

## 查看当前工作目录

```
:pwd
```

```lua
local current_dir = vim.fn.getcwd()
print(current_dir)
```

示例

```lua
-- 设置默认工作目录
vim.fn.chdir(vim.fn.expand("~/projects"))

-- 或者根据文件类型设置
vim.api.nvim_create_autocmd("BufReadPost", {
  callback = function()
    local file_dir = vim.fn.fnamemodify(vim.fn.expand("%:p"), ":h")
    vim.fn.chdir(file_dir)
  end,
})
```

```lua
-- 切换到项目根目录
vim.api.nvim_create_user_command("CDProject", function()
  vim.fn.chdir("~/projects/my-project")
  vim.notify("切换到项目目录", vim.log.levels.INFO)
end, {})

-- 切换到当前文件目录
vim.api.nvim_create_user_command("CDFile", function()
  local file_dir = vim.fn.fnamemodify(vim.fn.expand("%:p"), ":h")
  vim.fn.chdir(file_dir)
  vim.notify("切换到文件目录: " .. file_dir, vim.log.levels.INFO)
end, {})
```

```lua
local function change_directory_safe(path)
  local success, result = pcall(vim.fn.chdir, path)
  
  if success then
    local new_dir = vim.fn.getcwd()
    vim.notify("目录已切换到: " .. new_dir, vim.log.levels.INFO)
  else
    vim.notify("切换目录失败: " .. path, vim.log.levels.ERROR)
  end
end

-- 使用
change_directory_safe("/path/to/directory")
```
