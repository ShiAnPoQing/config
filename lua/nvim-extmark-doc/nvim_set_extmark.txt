*nvim_buf_set_extmark()*

nvim_buf_set_extmark({buffer}, {ns_id}, {line}, {col}, {opts})
创建或更新一个 |extmark|。

默认情况下，当没有传入 `id` 时会创建一个新的 `extmark`，
但也可以通过传入一个之前未使用过的 `id` 来创建新标记，
或通过传入已存在的 `id` 来移动现有标记。

调用者必须自己跟踪现有和未使用的 `id`。（在RPC中很有用，可以避免等待返回值。）

使用可选参数，可以用它来高亮一段文本，也可以将虚拟文本关联到标记。

如果存在，由 `end_col` 和 `end_row` 定义的位置应该在起始位置之后，以便 `extmark` 覆盖一个范围。

较早的结束位置不会报错，但会表现得像一个空范围（没有高亮）。

Parameters: ~
  buffer: number	缓冲区 id(0 当前缓冲区)
  ns_id: 		来自 |nvim_create_namespace()| 的命名空间id
  line: number		放置标记的行，从 0 开始
  col: number		放置标记的列，从 0 开始
  opts: table		可选参数
    virt_text: table<[text, highlight]>
	    链接到此标记的虚拟文本。
      	    一个[text, highlight] 元组的列表，每个元组代表一个具有指定高亮的文本块。
      	    highlight元素可以是单个高亮组，或多个高亮组的数组， 这些高亮组将被堆叠（最高优先级在最后）。
    virt_text_pos: "eol"| "eol_right_align"|"overlay"|"right_align"|"inline"(default: "eol")
	    虚拟文本的位置。
	      "eol"
		  在行尾字符之后（默认）。
	      "eol_right_align"
		  在窗口中右对齐显示，除非虚拟文本长度超过可用空间。
		  如果虚拟文本太长，它会被截断以适应EOL字符后的窗口空间。
		  如果行被换行，虚拟文本会显示在行尾而不是前一个屏幕行。
	      "overlay":
		  显示在指定列上，不移动底层文本。
	      "right_align":
		  在窗口中右对齐显示。
	      "inline":
		  在指定列显示，并根据需要将缓冲区文本向右移动。
    virt_text_win_col:
	    将虚拟文本固定在窗口列（从屏幕行的第一个文本列开始）
	    而不是使用"virt_text_pos"。
    virt_text_hide:
	    当背景文本被选中或因'nowrap'或'smoothscroll'滚动而隐藏时，隐藏虚拟文本。
      	    目前只影响"overlay"virt_text。
    virt_text_repeat_linebreak :
	    在换行的行上重复虚拟文本。
    virt_lines:	
	    在此标记旁添加的虚拟行。
	    这应该是一个行数组，每行又是[text, highlight]元组的数组。
      	    通常，缓冲区和窗口选项不影响文本的显示。
      	    特别是'wrap'和'linebreak'选项不生效，所以额外屏幕行的数量将始终匹配数组的大小。
      	    但'tabstop'缓冲区选项仍用于硬制表符。
      	    默认情况下，行放置在包含标记的缓冲区行下面。
    virt_lines_above:	
	    改为在上方放置虚拟行。
    virt_lines_leftcol:	
	    将虚拟行放在窗口最左列，绕过符号和数字列。
    virt_lines_overflow:	
	    控制如何处理比窗口宽的虚拟行。
	    目前采用以下值之一：
	      "trunc":	  在右侧截断虚拟行（默认）。
	      "scroll":   虚拟行可以在'nowrap'时水平滚动，否则与"trunc"相同。
	      ephemeral : 用于|nvim_set_decoration_provider()|回调。
			  标记只用于当前重绘周期，不会永久存储在缓冲区中。
    id: number
	    要编辑的 extmark 的 id。
    end_row: number
	    标记的结束行，从0开始，包含在内。
    end_col: number
	    标记的结束列，从0开始，不包含在内。
    hl_group:
	    用于文本范围的高亮组。
	    这个和下面的高亮组可以作为字符串或整数提供，
	    后者可以通过 |nvim_get_hl_id_by_name()| 获得。
	    多个高亮组可以通过传递数组来堆叠（最高优先级在最后）。
    hl_eol: boolean
	    当为 true 时，对于覆盖行尾的多行高亮，继续高亮屏幕行的其余部分（就像diff和cursorline高亮一样）。
    hl_mode: table
	    控制高亮如何与文本的高亮组合。
	    目前只影响virt_text高亮，但在以后的版本中可能会影响hl_group。
	    table:
	      "replace":  只显示virt_text颜色。这是默认值。
	      "combine":  与背景文本颜色组合。
	      "blend":    与背景文本颜色混合。不支持"inline" virt_text。
    right_gravity: boolean(default: true)
	    指示插入新文本时 extmark 将移动的方向（true为右，false为左）。
    end_right_gravity: boolean(default: false)
	    指示插入新文本时 extmark 结束位置（如果存在）将移动的方向（true为右，false为左）。
    undo_restore: boolean(default: true)
	    如果标记周围的文本被删除然后通过撤销恢复，恢复标记的确切位置。
    invalidate: boolean
	    指示如果其范围全部被删除是否隐藏extmark。
      	    对于隐藏的标记，会在 |nvim_buf_get_extmarks()| 及其家族的"details"数组中添加"invalid"键。
      	    如果"undo_restore"为false，则删除extmark。
    priority: number
	    高亮组、符号属性或虚拟文本的优先级值。
	    对于虚拟文本，最高优先级的项目最后绘制。
      	    例如，treesitter高亮使用100的值。
    strict: boolean(default: true)
	    指示如果行或列值超过缓冲区末尾或行末，则不应放置extmark。
    sign_text: string
	    长度为 1-2 的字符串，用于在符号列中显示。
    sign_hl_group:
	    用于符号列文本的高亮组。
    number_hl_group:
	    用于行号列的高亮组。
    line_hl_group:
	    用于整行的高亮组。
    cursorline_hl_group:
	    当光标在标记所在行且'cursorline'启用时，用于符号列文本的高亮组。
    conceal:
	    应该为空或单个字符的字符串。
	    启用类似于 |:syn-conceal| 的隐藏。
	    当提供字符时，它用作 |:syn-cchar| 。
            如果提供了"hl_group"，则用作cchar的高亮，否则默认为 |hl-Conceal| 。
    conceal_lines:
	    应该为空的字符串。
	    当提供时，范围内的行完全不绘制（根据'conceallevel'）；
	    而是绘制下一个未隐藏的行。
    spell: boolean
	    指示是否应在此 extmark 内执行拼写检查
    ui_watched: boolean
	    指示标记应由UI绘制。
	    设置时，UI 将接收 win_extmark 事件。注意：标记由virt_text属性定位。
            可以与virt_text一起使用。
    url:
	    与此 extmark 关联的 URL 。
	    在 TUI 中，使用 OSC 8 控制序列生成指向此 URL 的可点击超链接。

返回值: ~
    创建/更新的 extmark 的 Id

opt
  virt_text_pos
  virt_text_hide

  virt_text: table<[text, highlight]>
  virt_text_repeat_linebreak

opt
  virt_text_win_col

  virt_text: table<[text, highlight]>
  virt_text_repeat_linebreak

opt
  virt_lines: table<table<[text,highlight]>>
  virt_lines_above
  virt_lines_leftcol
  virt_lines_overflow

 vim:tw=78:ts=8:noet:ft=help:norl:
